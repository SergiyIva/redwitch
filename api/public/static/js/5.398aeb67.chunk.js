(this.webpackJsonpfinevideo=this.webpackJsonpfinevideo||[]).push([[5],{164:function(e,a,c){"use strict";c.d(a,"a",(function(){return l}));var t=c(22),s=c(1),l=function(e){var a=e.error,c=e.tryAgain;return Object(s.jsxs)("div",{className:"container pt-3",children:[Object(s.jsx)("h1",{className:"alert-danger rounded-2 px-sm-1",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(s.jsxs)("div",{children:["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ",a.message]}),c&&Object(s.jsxs)("div",{children:["\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439"," ",Object(s.jsx)("a",{href:"#",onClick:c,children:"\u0437\u0430\u043f\u0440\u043e\u0441"})]}),Object(s.jsx)("p",{children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0431\u044b\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u043e\u0437\u0436\u0435."}),Object(s.jsx)(t.b,{to:"/admin/main",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})}},179:function(e,a,c){"use strict";c.r(a);var t=c(8),s=c(11),l=c(159),n=c(160),i=c(29),r=c(36),d=c(63),o=c(3),b=(c(165),c(168)),j=c(96),m=c(1),u=null,h=function(e){var a=e.card,c=e.addCard,s=Object(o.useState)(null),l=Object(t.a)(s,2),n=l[0],i=l[1],r=Object(d.a)({name:a.name,slug:a.slug,content:a.describe,price:a.price,position:a.position,tags:a.tags.join(","),checkbox:a.available.toString()}),h=Object(t.a)(r,1)[0],x=Object(o.useRef)(),O=Object(o.useMemo)((function(){return Object(j.a)()}),[]),v=Object(o.useCallback)((function(e){e.preventDefault();var a={available:"true"===h.value.checkbox,describe:h.value.content,name:h.value.name,slug:h.value.slug,price:Number(h.value.price),tags:h.value.tags.replace(/\s/g,"").split(",")},t=O({content:a.describe,name:a.name,other:a.slug,price:a.price,array:a.tags});i(t),u&&u.cachedFileArray&&(a.file=u.cachedFileArray[0]),h.value.position&&(a.position=Number(h.value.position)),console.log(t),t.isValid?c({variables:a}):window.scrollTo({top:150})}),[h.value,O]);return Object(o.useEffect)((function(){return u=new b.a("myFirstImage",{accept:"image/*",text:{browse:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",chooseFile:"\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",selectedCount:"\u0424\u0430\u0439\u043b \u0432\u044b\u0431\u0440\u0430\u043d"}}),function(){u=null}}),[]),Object(m.jsxs)("form",{id:"form",className:"needs-validation",method:"post",role:"form",onSubmit:v,children:[Object(m.jsxs)("div",{className:"row g-3",children:[Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsxs)("label",{htmlFor:"name",className:"form-label",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 ",Object(m.jsx)("span",{className:"text-muted",children:"(\u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c)"})]}),Object(m.jsx)("input",{name:"name",type:"text",className:"form-control ".concat(n&&n.name&&("isValid"===n.name?"is-valid":"is-invalid")),id:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:h.value.name,onChange:h.onChange,required:!0}),Object(m.jsx)("div",{className:"invalid-feedback",children:n&&n.name})]}),Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsx)("label",{htmlFor:"slug",className:"form-label",children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(m.jsx)("input",{name:"slug",type:"text",className:"form-control ".concat(n&&n.other&&("isValid"===n.other?"is-valid":"is-invalid")),id:"slug",placeholder:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:h.value.slug,onChange:h.onChange,required:!0}),Object(m.jsx)("div",{className:"invalid-feedback",children:n&&n.other})]}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("span",{className:"input-group-text",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(m.jsx)("textarea",{name:"content",className:"form-control ".concat(n&&n.content&&("isValid"===n.content?"is-valid":"is-invalid")),"aria-label":"With textarea",value:h.value.content,onChange:h.onChange,required:!0}),Object(m.jsx)("div",{className:"invalid-feedback",children:n&&n.content})]}),Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsx)("label",{htmlFor:"price",className:"form-label",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(m.jsx)("input",{name:"price",type:"number",className:"form-control ".concat(n&&n.price&&("isValid"===n.price?"is-valid":"is-invalid")),id:"price",placeholder:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",value:h.value.price,onChange:h.onChange,required:!0}),Object(m.jsx)("div",{className:"invalid-feedback",children:n&&n.price})]}),Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsxs)("label",{htmlFor:"position",className:"form-label",children:["\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043d\u0430 \u0432\u0438\u0442\u0440\u0438\u043d\u0435"," ",Object(m.jsx)("span",{className:"text-muted",children:"(\u0447\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435, \u0442\u0435\u043c \u0432\u044b\u0448\u0435)"})]}),Object(m.jsx)("input",{name:"position",type:"number",className:"form-control",id:"position",placeholder:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f",value:h.value.position,onChange:h.onChange,required:!0})]}),Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsxs)("label",{htmlFor:"tags",className:"form-label",children:["\u0422\u044d\u0433\u0438 ",Object(m.jsx)("span",{className:"text-muted",children:"(\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)"})]}),Object(m.jsx)("input",{name:"tags",type:"text",className:"form-control ".concat(n&&n.array&&("isValid"===n.array?"is-valid":"is-invalid")),id:"tags",placeholder:"\u0422\u044d\u0433\u0438",value:h.value.tags,onChange:h.onChange,required:!0}),Object(m.jsx)("div",{className:"invalid-feedback",children:n&&n.array})]}),Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsx)("input",{name:"checkbox",type:"checkbox",className:"form-check-input",id:"same-address",value:h.value.checkbox,checked:"true"===h.value.checkbox,onChange:h.onChange}),Object(m.jsx)("label",{className:"form-check-label mx-1",htmlFor:"same-address",children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c \u0434\u043b\u044f \u043f\u043e\u043a\u0443\u043f\u043a\u0438."})]}),Object(m.jsx)("div",{ref:x,className:"custom-file-container mb-3","data-upload-id":"myFirstImage"})]}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsx)("button",{id:"button",className:"w-100 btn btn-success btn-lg",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},x=c(62),O=c(166),v=c(167),p=c(164),g=c(10),f=function(e){var a=e.card,c=e.setSuccess,s=e.setError,l=Object(n.a)(x.c,{variables:{idx:a.sku},onCompleted:function(e){if(O.current.click(),e.deleteCard){c("TRUE");var t=h.cache.readQuery({query:i.e});if(!t)return;var s=t.getCards.filter((function(e){var c=e.id;return a.id!==c})),l=Object(g.a)(Object(g.a)({},t),{},{getCards:s});h.cache.writeQuery({query:i.e,data:l})}else c("FALSE")},onError:function(e){O.current.click(),s(e)}}),d=Object(t.a)(l,2),b=d[0],j=d[1],u=j.loading,h=j.client,O=Object(o.useRef)();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-danger w-100 mt-3","data-bs-toggle":"modal","data-bs-target":"#exampleModalDefault",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(m.jsx)("div",{className:"modal fade",id:"exampleModalDefault",tabIndex:-1,"aria-labelledby":"exampleModalLabel",style:{display:"none"},"aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435"}),Object(m.jsx)("button",{ref:O,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),u?Object(m.jsx)(r.a,{}):Object(m.jsxs)("div",{className:"modal-body",children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0443 ",a.name,"? \u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c."]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(m.jsx)("button",{id:"delBtn",type:"button",className:"btn btn-primary",onClick:function(){b()},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})})})]})};a.default=function(){var e=Object(s.g)(),a=Object(o.useState)(""),c=Object(t.a)(a,2),d=c[0],b=c[1],j=Object(o.useState)(null),u=Object(t.a)(j,2),g=u[0],N=u[1],y=Object(l.a)(i.d,{variables:{idx:e.sku}}),C=y.data,k=y.loading,F=y.error,w=Object(n.a)(x.e,{onCompleted:function(e){e.upsertCard?b("TRUE"):b("FALSE")},onError:function(e){N(e)}}),E=Object(t.a)(w,2),S=E[0],q=E[1].loading;return k||q?Object(m.jsx)(r.a,{}):F?Object(m.jsx)(p.a,{error:F}):C?"TRUE"===d?Object(m.jsx)(v.a,{goBack:"/admin/products"}):"FALSE"===d||g?Object(m.jsx)(O.a,{error:g||new Error("\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438."),tryAgain:function(){return b("")}}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"pt-3 pb-2 mb-3 border-bottom",children:Object(m.jsx)("h2",{className:"h2",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0443"})}),Object(m.jsx)("div",{className:"py-3 text-center",children:Object(m.jsx)("p",{className:"lead",children:'\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432 \u043f\u043e\u043b\u044f\u0445 \u0444\u043e\u0440\u043c\u044b, \u0447\u0442\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0438\u0436\u0435. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c".'})}),Object(m.jsx)("div",{className:"row pb-5",children:Object(m.jsxs)("div",{className:"col-md-7 col-lg-8",children:[Object(m.jsx)("h4",{className:"mb-3",children:"\u041d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(m.jsx)(h,{card:C.getCards[0],addCard:S}),Object(m.jsx)(f,{card:C.getCards[0],setSuccess:b,setError:N})]})})]}):Object(m.jsx)("div",{children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0431\u044b\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b."})}}}]);
//# sourceMappingURL=5.398aeb67.chunk.js.map